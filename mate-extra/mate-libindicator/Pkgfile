# Description: A set of symbols and convience functions that all indicators would like to use. 
# URL: http://matsusoft.com.ar/projects/mate
# Packager: fanchyannmaria at orange dot fr
# Depends on: gtk3

name=mate-libindicator
version=12.10.1
release=2
source=(http://launchpad.net/libindicator/${version%.*}/$version/+download/libindicator-$version.tar.gz)

build() {
sed '/-Werror/s/$/ -Wno-deprecated-declarations/' -i libindicator-${version}/libindicator/Makefile.{am,in}
sed 's/LIBINDICATOR_LIBS+="$LIBM"/LIBINDICATOR_LIBS+=" $LIBM"/g' -i libindicator-${version}/configure
sed 's/LIBM="-lmw"/LIBM=" -lmw"/g' -i libindicator-${version}/configure
sed 's/LIBM="-lm"/LIBM=" -lm"/g' -i libindicator-${version}/configure
sed 's/LIBS="-lm  $LIBS"/LIBS=" -lm  $LIBS"/g' -i libindicator-${version}/configure
sed 's/LIBS="-lmw $LIBS"/LIBS=" -lmw $LIBS"/g' -i libindicator-${version}/configure
mkdir -p build-gtk3
cd build-gtk3
../libindicator-${version}/configure \
      --prefix=/usr \
      --localstatedir=/var \
      --libexecdir=/usr/lib/libindicator \
      --sysconfdir=/etc \
      --with-gtk=3 \
      --disable-static \
      --disable-tests
make
make DESTDIR=$PKG install
}
